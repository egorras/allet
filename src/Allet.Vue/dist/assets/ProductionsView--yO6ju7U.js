import{d as S,r as M,o as l,c as s,a as _,b as t,t as a,F as r,e as v,f as N,g as k,w,h as C,i as B,j as h,v as A,k as $,n as V,l as i}from"./index-Bo3-Od0e.js";import{_ as P,f as D,a as F}from"./TagBadge.vue_vue_type_script_setup_true_lang-RPAh6Gpl.js";import"./client-0yvi7SZB.js";const j={class:"card h-100"},L=["src","alt"],Z={class:"card-body d-flex flex-column"},z={class:"card-title"},E={class:"card-text text-muted mb-1"},G={key:0,class:"card-text mb-1"},I={class:"badge bg-primary"},O={key:1,class:"card-text mb-2"},R={class:"mt-auto d-flex justify-content-between align-items-center"},q={class:"badge bg-secondary"},H=S({__name:"ProductionCard",props:{production:{}},setup(n){return(m,d)=>{const b=M("router-link");return l(),s("div",j,[n.production.imageUrl?(l(),s("img",{key:0,src:n.production.imageUrl,class:"card-img-top",alt:n.production.title,style:{height:"200px","object-fit":"cover"}},null,8,L)):_("",!0),t("div",Z,[t("h5",z,a(n.production.title),1),t("p",E,a(n.production.season),1),n.production.category?(l(),s("p",G,[t("span",I,a(n.production.category),1)])):_("",!0),n.production.tags.length?(l(),s("p",O,[(l(!0),s(r,null,v(n.production.tags,u=>(l(),N(P,{key:u,tag:u},null,8,["tag"]))),128))])):_("",!0),t("div",R,[t("span",q,a(n.production.showCount)+" show(s)",1),k(b,{to:`/productions/${n.production.id}`,class:"btn btn-sm btn-outline-primary"},{default:w(()=>[...d[0]||(d[0]=[C("Details",-1)])]),_:1},8,["to"])])])])}}}),J={class:"row g-2 align-items-end mb-3"},K={class:"col-md-3"},Q={class:"col-auto"},W=["value"],X={class:"col-auto"},Y=["value"],tt={class:"col-auto"},et={class:"col-auto"},ot={class:"btn-group",role:"group"},lt={key:0},st={key:1,class:"alert alert-info mt-3"},nt={key:2,class:"row mt-3"},at={key:3,class:"table-responsive mt-3"},it={class:"table table-striped table-hover"},vt=S({__name:"ProductionsView",setup(n){const m=i([]),d=i({seasons:[],categories:[]}),b=i(!0),u=i(""),g=i(""),p=i(""),f=i("title-asc"),y=i("gallery");async function c(){b.value=!0;try{m.value=await F({search:u.value,season:g.value,category:p.value,sort:f.value})}finally{b.value=!1}}function U(){u.value="",g.value="",p.value="",f.value="title-asc",c()}return B(async()=>{d.value=await D(),await c()}),(ut,o)=>{const x=M("router-link");return l(),s(r,null,[o[12]||(o[12]=t("h1",null,"Productions",-1)),o[13]||(o[13]=t("p",null,"Opera, ballet & theatre productions by season.",-1)),t("div",J,[t("div",K,[h(t("input",{type:"search",class:"form-control",placeholder:"Search...","onUpdate:modelValue":o[0]||(o[0]=e=>u.value=e),onInput:c},null,544),[[A,u.value]])]),t("div",Q,[h(t("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=e=>g.value=e),onChange:c},[o[6]||(o[6]=t("option",{value:""},"All seasons",-1)),(l(!0),s(r,null,v(d.value.seasons,e=>(l(),s("option",{key:e,value:e},a(e),9,W))),128))],544),[[$,g.value]])]),t("div",X,[h(t("select",{class:"form-select","onUpdate:modelValue":o[2]||(o[2]=e=>p.value=e),onChange:c},[o[7]||(o[7]=t("option",{value:""},"All categories",-1)),(l(!0),s(r,null,v(d.value.categories,e=>(l(),s("option",{key:e,value:e},a(e),9,Y))),128))],544),[[$,p.value]])]),t("div",tt,[h(t("select",{class:"form-select","onUpdate:modelValue":o[3]||(o[3]=e=>f.value=e),onChange:c},[...o[8]||(o[8]=[t("option",{value:"title-asc"},"Title (A-Z)",-1),t("option",{value:"title-desc"},"Title (Z-A)",-1),t("option",{value:"newest"},"Newest first",-1),t("option",{value:"season"},"Season",-1)])],544),[[$,f.value]])]),t("div",et,[t("div",ot,[t("button",{type:"button",class:V(["btn btn-sm",y.value==="gallery"?"btn-primary":"btn-outline-primary"]),onClick:o[4]||(o[4]=e=>y.value="gallery")},"Gallery",2),t("button",{type:"button",class:V(["btn btn-sm",y.value==="table"?"btn-primary":"btn-outline-primary"]),onClick:o[5]||(o[5]=e=>y.value="table")},"Table",2)])]),t("div",{class:"col-auto"},[t("button",{class:"btn btn-outline-secondary btn-sm",onClick:U},"Clear")])]),b.value?(l(),s("div",lt,[...o[9]||(o[9]=[t("p",null,[t("em",null,"Loading...")],-1)])])):m.value.length===0?(l(),s("div",st," No productions found. ")):y.value==="gallery"?(l(),s("div",nt,[(l(!0),s(r,null,v(m.value,e=>(l(),s("div",{key:e.id,class:"col-md-4 col-lg-3 mb-4"},[k(H,{production:e},null,8,["production"])]))),128))])):(l(),s("div",at,[t("table",it,[o[11]||(o[11]=t("thead",null,[t("tr",null,[t("th",null,"Title"),t("th",null,"Season"),t("th",null,"Category"),t("th",null,"Tags"),t("th",null,"Shows"),t("th",null,"Running Time"),t("th")])],-1)),t("tbody",null,[(l(!0),s(r,null,v(m.value,e=>(l(),s("tr",{key:e.id},[t("td",null,[k(x,{to:`/productions/${e.id}`},{default:w(()=>[C(a(e.title),1)]),_:2},1032,["to"])]),t("td",null,a(e.season),1),t("td",null,a(e.category),1),t("td",null,[(l(!0),s(r,null,v(e.tags,T=>(l(),N(P,{key:T,tag:T},null,8,["tag"]))),128))]),t("td",null,a(e.showCount),1),t("td",null,a(e.runningTimeMinutes?`${e.runningTimeMinutes} min`:"â€”"),1),t("td",null,[k(x,{to:`/productions/${e.id}`,class:"btn btn-sm btn-outline-primary"},{default:w(()=>[...o[10]||(o[10]=[C("Details",-1)])]),_:1},8,["to"])])]))),128))])])]))],64)}}});export{vt as default};
