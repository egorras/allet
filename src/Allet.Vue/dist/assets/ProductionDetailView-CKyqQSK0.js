import{d as w,i as T,c as o,b as e,g as L,w as M,t as a,a as r,n as S,F as i,e as c,h as _,u as V,m as x,l as v,r as N,o as l,f as U}from"./index-Bo3-Od0e.js";import{b as D,_ as R}from"./TagBadge.vue_vue_type_script_setup_true_lang-RPAh6Gpl.js";import"./client-0yvi7SZB.js";const C={key:0},$={key:1},B={"aria-label":"breadcrumb"},H={class:"breadcrumb"},G={class:"breadcrumb-item"},I={class:"breadcrumb-item active"},O={class:"row"},P={key:0,class:"col-md-4 mb-3"},F=["src","alt"],z={key:0,class:"lead text-muted"},A={class:"mb-3"},E={class:"text-muted"},j={key:0,class:"ms-2"},q={key:1,class:"badge bg-primary ms-1"},J=["innerHTML"],K={class:"row mb-0"},Q={class:"col-sm-9"},W={class:"col-sm-9"},X={class:"col-sm-9"},Y=["href"],Z={class:"col-sm-9"},ee=["innerHTML"],te={class:"row g-2 mb-4"},se=["href"],le=["src"],oe={class:"mt-4"},ne={class:"badge bg-secondary"},ae={key:3,class:"alert alert-info"},re={key:4,class:"table-responsive"},ie={class:"table table-striped table-hover"},ue={key:0,class:"badge bg-warning text-dark"},de=["href"],ve=w({__name:"ProductionDetailView",props:{id:{}},setup(h){const g=h,p=V(),y=x(),t=v(null),m=v(!0);function b(u){const s=Math.floor(u/60),d=u%60;return s>0&&d>0?`${s}h ${d}m`:s>0?`${s}h`:`${d}m`}function k(u){return new Date(u).toISOString().slice(0,16).replace("T"," ")}return T(async()=>{try{const u=Number(g.id||p.params.id);t.value=await D(u)}catch{y.push("/productions")}finally{m.value=!1}}),(u,s)=>{const d=N("router-link");return m.value?(l(),o("div",C,[...s[0]||(s[0]=[e("p",null,[e("em",null,"Loading...")],-1)])])):t.value?(l(),o("div",$,[e("nav",B,[e("ol",H,[e("li",G,[L(d,{to:"/productions"},{default:M(()=>[...s[1]||(s[1]=[_("Productions",-1)])]),_:1})]),e("li",I,a(t.value.title),1)])]),e("div",O,[t.value.imageUrl?(l(),o("div",P,[e("img",{src:t.value.imageUrl,class:"img-fluid rounded",alt:t.value.title},null,8,F)])):r("",!0),e("div",{class:S(t.value.imageUrl?"col-md-8":"col-12")},[e("h1",null,a(t.value.title),1),t.value.subtitle?(l(),o("p",z,a(t.value.subtitle),1)):r("",!0),e("div",A,[e("span",E,a(t.value.season),1),t.value.tags.length?(l(),o("span",j,[(l(!0),o(i,null,c(t.value.tags,n=>(l(),U(R,{key:n,tag:n},null,8,["tag"]))),128))])):r("",!0),t.value.category?(l(),o("span",q,a(t.value.category),1)):r("",!0)]),t.value.description?(l(),o("div",{key:1,innerHTML:t.value.description},null,8,J)):r("",!0),e("dl",K,[t.value.runningTimeMinutes?(l(),o(i,{key:0},[s[2]||(s[2]=e("dt",{class:"col-sm-3"},"Running time",-1)),e("dd",Q,a(b(t.value.runningTimeMinutes)),1)],64)):r("",!0),s[4]||(s[4]=e("dt",{class:"col-sm-3"},"Source",-1)),e("dd",W,a(t.value.source),1),t.value.sourceUrl?(l(),o(i,{key:1},[s[3]||(s[3]=e("dt",{class:"col-sm-3"},"Link",-1)),e("dd",X,[e("a",{href:t.value.sourceUrl,target:"_blank",rel:"noopener"},"View on source site",8,Y)])],64)):r("",!0),s[5]||(s[5]=e("dt",{class:"col-sm-3"},"Tracked since",-1)),e("dd",Z,a(new Date(t.value.createdAt).toISOString().slice(0,10)),1)])],2)]),t.value.synopsis?(l(),o(i,{key:0},[s[6]||(s[6]=e("h2",{class:"mt-4"},"Synopsis",-1)),e("div",{innerHTML:t.value.synopsis},null,8,ee)],64)):r("",!0),t.value.galleryUrls.length>0?(l(),o(i,{key:1},[s[7]||(s[7]=e("h2",{class:"mt-4"},"Gallery",-1)),e("div",te,[(l(!0),o(i,null,c(t.value.galleryUrls,n=>(l(),o("div",{key:n,class:"col-6 col-md-4 col-lg-3"},[e("a",{href:n,target:"_blank"},[e("img",{src:n,class:"img-fluid rounded",alt:"Gallery image"},null,8,le)],8,se)]))),128))])],64)):r("",!0),t.value.guide?(l(),o(i,{key:2},[s[8]||(s[8]=e("h2",{class:"mt-4"},"Opera Guide",-1)),(l(!0),o(i,null,c(t.value.guide.split(`

`),(n,f)=>(l(),o("p",{key:f},a(n),1))),128))],64)):r("",!0),e("h2",oe,[s[9]||(s[9]=_("Shows ",-1)),e("span",ne,a(t.value.shows.length),1)]),t.value.shows.length===0?(l(),o("div",ae," No shows found for this production. ")):(l(),o("div",re,[e("table",ie,[s[10]||(s[10]=e("thead",null,[e("tr",null,[e("th",null,"Title"),e("th",null,"Venue"),e("th",null,"Date"),e("th",null,"Info"),e("th",null,"Link")])],-1)),e("tbody",null,[(l(!0),o(i,null,c(t.value.shows,n=>(l(),o("tr",{key:n.id},[e("td",null,a(n.title),1),e("td",null,a(n.venueName),1),e("td",null,a(n.date?k(n.date):""),1),e("td",null,[n.isRehearsal?(l(),o("span",ue,"Rehearsal")):r("",!0)]),e("td",null,[n.url?(l(),o("a",{key:0,href:n.url,target:"_blank",rel:"noopener"},"View",8,de)):r("",!0)])]))),128))])])]))])):r("",!0)}}});export{ve as default};
